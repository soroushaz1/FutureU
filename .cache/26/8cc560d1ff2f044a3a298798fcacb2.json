{"id":"node_modules/@babylonjs/core/Shaders/pbr.fragment.js","dependencies":[{"name":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js.map","includedInParent":true,"mtime":1704105649746},{"name":"F:\\FutureU\\babylonjs\\package.json","includedInParent":true,"mtime":1704105536080},{"name":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\package.json","includedInParent":true,"mtime":1704105648327},{"name":"../Engines/shaderStore.js","loc":{"line":2,"column":28,"index":44},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Engines\\shaderStore.js"},{"name":"./ShadersInclude/prePassDeclaration.js","loc":{"line":3,"column":7,"index":80},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\prePassDeclaration.js"},{"name":"./ShadersInclude/oitDeclaration.js","loc":{"line":4,"column":7,"index":129},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\oitDeclaration.js"},{"name":"./ShadersInclude/pbrFragmentDeclaration.js","loc":{"line":5,"column":7,"index":174},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrFragmentDeclaration.js"},{"name":"./ShadersInclude/pbrUboDeclaration.js","loc":{"line":6,"column":7,"index":227},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrUboDeclaration.js"},{"name":"./ShadersInclude/pbrFragmentExtraDeclaration.js","loc":{"line":7,"column":7,"index":275},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrFragmentExtraDeclaration.js"},{"name":"./ShadersInclude/lightFragmentDeclaration.js","loc":{"line":8,"column":7,"index":333},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\lightFragmentDeclaration.js"},{"name":"./ShadersInclude/lightUboDeclaration.js","loc":{"line":9,"column":7,"index":388},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\lightUboDeclaration.js"},{"name":"./ShadersInclude/pbrFragmentSamplersDeclaration.js","loc":{"line":10,"column":7,"index":438},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrFragmentSamplersDeclaration.js"},{"name":"./ShadersInclude/imageProcessingDeclaration.js","loc":{"line":11,"column":7,"index":499},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\imageProcessingDeclaration.js"},{"name":"./ShadersInclude/clipPlaneFragmentDeclaration.js","loc":{"line":12,"column":7,"index":556},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\clipPlaneFragmentDeclaration.js"},{"name":"./ShadersInclude/logDepthDeclaration.js","loc":{"line":13,"column":7,"index":615},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\logDepthDeclaration.js"},{"name":"./ShadersInclude/fogFragmentDeclaration.js","loc":{"line":14,"column":7,"index":665},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\fogFragmentDeclaration.js"},{"name":"./ShadersInclude/helperFunctions.js","loc":{"line":15,"column":7,"index":718},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\helperFunctions.js"},{"name":"./ShadersInclude/subSurfaceScatteringFunctions.js","loc":{"line":16,"column":7,"index":764},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\subSurfaceScatteringFunctions.js"},{"name":"./ShadersInclude/importanceSampling.js","loc":{"line":17,"column":7,"index":824},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\importanceSampling.js"},{"name":"./ShadersInclude/pbrHelperFunctions.js","loc":{"line":18,"column":7,"index":873},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrHelperFunctions.js"},{"name":"./ShadersInclude/imageProcessingFunctions.js","loc":{"line":19,"column":7,"index":922},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\imageProcessingFunctions.js"},{"name":"./ShadersInclude/shadowsFragmentFunctions.js","loc":{"line":20,"column":7,"index":977},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\shadowsFragmentFunctions.js"},{"name":"./ShadersInclude/harmonicsFunctions.js","loc":{"line":21,"column":7,"index":1032},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\harmonicsFunctions.js"},{"name":"./ShadersInclude/pbrDirectLightingSetupFunctions.js","loc":{"line":22,"column":7,"index":1081},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrDirectLightingSetupFunctions.js"},{"name":"./ShadersInclude/pbrDirectLightingFalloffFunctions.js","loc":{"line":23,"column":7,"index":1143},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrDirectLightingFalloffFunctions.js"},{"name":"./ShadersInclude/pbrBRDFFunctions.js","loc":{"line":24,"column":7,"index":1207},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBRDFFunctions.js"},{"name":"./ShadersInclude/hdrFilteringFunctions.js","loc":{"line":25,"column":7,"index":1254},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\hdrFilteringFunctions.js"},{"name":"./ShadersInclude/pbrDirectLightingFunctions.js","loc":{"line":26,"column":7,"index":1306},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrDirectLightingFunctions.js"},{"name":"./ShadersInclude/pbrIBLFunctions.js","loc":{"line":27,"column":7,"index":1363},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrIBLFunctions.js"},{"name":"./ShadersInclude/bumpFragmentMainFunctions.js","loc":{"line":28,"column":7,"index":1409},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\bumpFragmentMainFunctions.js"},{"name":"./ShadersInclude/bumpFragmentFunctions.js","loc":{"line":29,"column":7,"index":1465},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\bumpFragmentFunctions.js"},{"name":"./ShadersInclude/reflectionFunction.js","loc":{"line":30,"column":7,"index":1517},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\reflectionFunction.js"},{"name":"./ShadersInclude/pbrBlockAlbedoOpacity.js","loc":{"line":31,"column":7,"index":1566},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockAlbedoOpacity.js"},{"name":"./ShadersInclude/pbrBlockReflectivity.js","loc":{"line":32,"column":7,"index":1618},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockReflectivity.js"},{"name":"./ShadersInclude/pbrBlockAmbientOcclusion.js","loc":{"line":33,"column":7,"index":1669},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockAmbientOcclusion.js"},{"name":"./ShadersInclude/pbrBlockAlphaFresnel.js","loc":{"line":34,"column":7,"index":1724},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockAlphaFresnel.js"},{"name":"./ShadersInclude/pbrBlockAnisotropic.js","loc":{"line":35,"column":7,"index":1775},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockAnisotropic.js"},{"name":"./ShadersInclude/pbrBlockReflection.js","loc":{"line":36,"column":7,"index":1825},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockReflection.js"},{"name":"./ShadersInclude/pbrBlockSheen.js","loc":{"line":37,"column":7,"index":1874},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockSheen.js"},{"name":"./ShadersInclude/pbrBlockClearcoat.js","loc":{"line":38,"column":7,"index":1918},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockClearcoat.js"},{"name":"./ShadersInclude/pbrBlockIridescence.js","loc":{"line":39,"column":7,"index":1966},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockIridescence.js"},{"name":"./ShadersInclude/pbrBlockSubSurface.js","loc":{"line":40,"column":7,"index":2016},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockSubSurface.js"},{"name":"./ShadersInclude/clipPlaneFragment.js","loc":{"line":41,"column":7,"index":2065},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\clipPlaneFragment.js"},{"name":"./ShadersInclude/pbrBlockNormalGeometric.js","loc":{"line":42,"column":7,"index":2113},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockNormalGeometric.js"},{"name":"./ShadersInclude/bumpFragment.js","loc":{"line":43,"column":7,"index":2167},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\bumpFragment.js"},{"name":"./ShadersInclude/pbrBlockNormalFinal.js","loc":{"line":44,"column":7,"index":2210},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockNormalFinal.js"},{"name":"./ShadersInclude/depthPrePass.js","loc":{"line":45,"column":7,"index":2260},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\depthPrePass.js"},{"name":"./ShadersInclude/pbrBlockLightmapInit.js","loc":{"line":46,"column":7,"index":2303},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockLightmapInit.js"},{"name":"./ShadersInclude/pbrBlockGeometryInfo.js","loc":{"line":47,"column":7,"index":2354},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockGeometryInfo.js"},{"name":"./ShadersInclude/pbrBlockReflectance0.js","loc":{"line":48,"column":7,"index":2405},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockReflectance0.js"},{"name":"./ShadersInclude/pbrBlockReflectance.js","loc":{"line":49,"column":7,"index":2456},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockReflectance.js"},{"name":"./ShadersInclude/pbrBlockDirectLighting.js","loc":{"line":50,"column":7,"index":2506},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockDirectLighting.js"},{"name":"./ShadersInclude/lightFragment.js","loc":{"line":51,"column":7,"index":2559},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\lightFragment.js"},{"name":"./ShadersInclude/pbrBlockFinalLitComponents.js","loc":{"line":52,"column":7,"index":2603},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockFinalLitComponents.js"},{"name":"./ShadersInclude/pbrBlockFinalUnlitComponents.js","loc":{"line":53,"column":7,"index":2660},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockFinalUnlitComponents.js"},{"name":"./ShadersInclude/pbrBlockFinalColorComposition.js","loc":{"line":54,"column":7,"index":2719},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockFinalColorComposition.js"},{"name":"./ShadersInclude/logDepthFragment.js","loc":{"line":55,"column":7,"index":2779},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\logDepthFragment.js"},{"name":"./ShadersInclude/fogFragment.js","loc":{"line":56,"column":7,"index":2826},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\fogFragment.js"},{"name":"./ShadersInclude/pbrBlockImageProcessing.js","loc":{"line":57,"column":7,"index":2868},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrBlockImageProcessing.js"},{"name":"./ShadersInclude/oitFragment.js","loc":{"line":58,"column":7,"index":2922},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\oitFragment.js"},{"name":"./ShadersInclude/pbrDebug.js","loc":{"line":59,"column":7,"index":2964},"parent":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\pbr.fragment.js","resolved":"F:\\FutureU\\babylonjs\\node_modules\\@babylonjs\\core\\Shaders\\ShadersInclude\\pbrDebug.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pbrPixelShader = void 0;\nvar _shaderStore = require(\"../Engines/shaderStore.js\");\nrequire(\"./ShadersInclude/prePassDeclaration.js\");\nrequire(\"./ShadersInclude/oitDeclaration.js\");\nrequire(\"./ShadersInclude/pbrFragmentDeclaration.js\");\nrequire(\"./ShadersInclude/pbrUboDeclaration.js\");\nrequire(\"./ShadersInclude/pbrFragmentExtraDeclaration.js\");\nrequire(\"./ShadersInclude/lightFragmentDeclaration.js\");\nrequire(\"./ShadersInclude/lightUboDeclaration.js\");\nrequire(\"./ShadersInclude/pbrFragmentSamplersDeclaration.js\");\nrequire(\"./ShadersInclude/imageProcessingDeclaration.js\");\nrequire(\"./ShadersInclude/clipPlaneFragmentDeclaration.js\");\nrequire(\"./ShadersInclude/logDepthDeclaration.js\");\nrequire(\"./ShadersInclude/fogFragmentDeclaration.js\");\nrequire(\"./ShadersInclude/helperFunctions.js\");\nrequire(\"./ShadersInclude/subSurfaceScatteringFunctions.js\");\nrequire(\"./ShadersInclude/importanceSampling.js\");\nrequire(\"./ShadersInclude/pbrHelperFunctions.js\");\nrequire(\"./ShadersInclude/imageProcessingFunctions.js\");\nrequire(\"./ShadersInclude/shadowsFragmentFunctions.js\");\nrequire(\"./ShadersInclude/harmonicsFunctions.js\");\nrequire(\"./ShadersInclude/pbrDirectLightingSetupFunctions.js\");\nrequire(\"./ShadersInclude/pbrDirectLightingFalloffFunctions.js\");\nrequire(\"./ShadersInclude/pbrBRDFFunctions.js\");\nrequire(\"./ShadersInclude/hdrFilteringFunctions.js\");\nrequire(\"./ShadersInclude/pbrDirectLightingFunctions.js\");\nrequire(\"./ShadersInclude/pbrIBLFunctions.js\");\nrequire(\"./ShadersInclude/bumpFragmentMainFunctions.js\");\nrequire(\"./ShadersInclude/bumpFragmentFunctions.js\");\nrequire(\"./ShadersInclude/reflectionFunction.js\");\nrequire(\"./ShadersInclude/pbrBlockAlbedoOpacity.js\");\nrequire(\"./ShadersInclude/pbrBlockReflectivity.js\");\nrequire(\"./ShadersInclude/pbrBlockAmbientOcclusion.js\");\nrequire(\"./ShadersInclude/pbrBlockAlphaFresnel.js\");\nrequire(\"./ShadersInclude/pbrBlockAnisotropic.js\");\nrequire(\"./ShadersInclude/pbrBlockReflection.js\");\nrequire(\"./ShadersInclude/pbrBlockSheen.js\");\nrequire(\"./ShadersInclude/pbrBlockClearcoat.js\");\nrequire(\"./ShadersInclude/pbrBlockIridescence.js\");\nrequire(\"./ShadersInclude/pbrBlockSubSurface.js\");\nrequire(\"./ShadersInclude/clipPlaneFragment.js\");\nrequire(\"./ShadersInclude/pbrBlockNormalGeometric.js\");\nrequire(\"./ShadersInclude/bumpFragment.js\");\nrequire(\"./ShadersInclude/pbrBlockNormalFinal.js\");\nrequire(\"./ShadersInclude/depthPrePass.js\");\nrequire(\"./ShadersInclude/pbrBlockLightmapInit.js\");\nrequire(\"./ShadersInclude/pbrBlockGeometryInfo.js\");\nrequire(\"./ShadersInclude/pbrBlockReflectance0.js\");\nrequire(\"./ShadersInclude/pbrBlockReflectance.js\");\nrequire(\"./ShadersInclude/pbrBlockDirectLighting.js\");\nrequire(\"./ShadersInclude/lightFragment.js\");\nrequire(\"./ShadersInclude/pbrBlockFinalLitComponents.js\");\nrequire(\"./ShadersInclude/pbrBlockFinalUnlitComponents.js\");\nrequire(\"./ShadersInclude/pbrBlockFinalColorComposition.js\");\nrequire(\"./ShadersInclude/logDepthFragment.js\");\nrequire(\"./ShadersInclude/fogFragment.js\");\nrequire(\"./ShadersInclude/pbrBlockImageProcessing.js\");\nrequire(\"./ShadersInclude/oitFragment.js\");\nrequire(\"./ShadersInclude/pbrDebug.js\");\n// Do not edit.\n\nconst name = \"pbrPixelShader\";\nconst shader = `#if defined(BUMP) || !defined(NORMAL) || defined(FORCENORMALFORWARD) || defined(SPECULARAA) || defined(CLEARCOAT_BUMP) || defined(ANISOTROPIC)\n#extension GL_OES_standard_derivatives : enable\n#endif\n#ifdef LODBASEDMICROSFURACE\n#extension GL_EXT_shader_texture_lod : enable\n#endif\n#define CUSTOM_FRAGMENT_BEGIN\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\n#include<prePassDeclaration>[SCENE_MRT_COUNT]\nprecision highp float;\n#include<oitDeclaration>\n#ifndef FROMLINEARSPACE\n#define FROMLINEARSPACE\n#endif\n#include<__decl__pbrFragment>\n#include<pbrFragmentExtraDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<pbrFragmentSamplersDeclaration>\n#include<imageProcessingDeclaration>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n#include<fogFragmentDeclaration>\n#include<helperFunctions>\n#include<subSurfaceScatteringFunctions>\n#include<importanceSampling>\n#include<pbrHelperFunctions>\n#include<imageProcessingFunctions>\n#include<shadowsFragmentFunctions>\n#include<harmonicsFunctions>\n#include<pbrDirectLightingSetupFunctions>\n#include<pbrDirectLightingFalloffFunctions>\n#include<pbrBRDFFunctions>\n#include<hdrFilteringFunctions>\n#include<pbrDirectLightingFunctions>\n#include<pbrIBLFunctions>\n#include<bumpFragmentMainFunctions>\n#include<bumpFragmentFunctions>\n#ifdef REFLECTION\n#include<reflectionFunction>\n#endif\n#define CUSTOM_FRAGMENT_DEFINITIONS\n#include<pbrBlockAlbedoOpacity>\n#include<pbrBlockReflectivity>\n#include<pbrBlockAmbientOcclusion>\n#include<pbrBlockAlphaFresnel>\n#include<pbrBlockAnisotropic>\n#include<pbrBlockReflection>\n#include<pbrBlockSheen>\n#include<pbrBlockClearcoat>\n#include<pbrBlockIridescence>\n#include<pbrBlockSubSurface>\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include<clipPlaneFragment>\n#include<pbrBlockNormalGeometric>\n#include<bumpFragment>\n#include<pbrBlockNormalFinal>\nalbedoOpacityOutParams albedoOpacityOut;\n#ifdef ALBEDO\nvec4 albedoTexture=texture2D(albedoSampler,vAlbedoUV+uvOffset);\n#endif\n#ifdef OPACITY\nvec4 opacityMap=texture2D(opacitySampler,vOpacityUV+uvOffset);\n#endif\n#ifdef DECAL\nvec4 decalColor=texture2D(decalSampler,vDecalUV+uvOffset);\n#endif\nalbedoOpacityBlock(\nvAlbedoColor,\n#ifdef ALBEDO\nalbedoTexture,\nvAlbedoInfos,\n#endif\n#ifdef OPACITY\nopacityMap,\nvOpacityInfos,\n#endif\n#ifdef DETAIL\ndetailColor,\nvDetailInfos,\n#endif\n#ifdef DECAL\ndecalColor,\nvDecalInfos,\n#endif\nalbedoOpacityOut\n);\nvec3 surfaceAlbedo=albedoOpacityOut.surfaceAlbedo;\nfloat alpha=albedoOpacityOut.alpha;\n#define CUSTOM_FRAGMENT_UPDATE_ALPHA\n#include<depthPrePass>\n#define CUSTOM_FRAGMENT_BEFORE_LIGHTS\nambientOcclusionOutParams aoOut;\n#ifdef AMBIENT\nvec3 ambientOcclusionColorMap=texture2D(ambientSampler,vAmbientUV+uvOffset).rgb;\n#endif\nambientOcclusionBlock(\n#ifdef AMBIENT\nambientOcclusionColorMap,\nvAmbientInfos,\n#endif\naoOut\n);\n#include<pbrBlockLightmapInit>\n#ifdef UNLIT\nvec3 diffuseBase=vec3(1.,1.,1.);\n#else\nvec3 baseColor=surfaceAlbedo;\nreflectivityOutParams reflectivityOut;\n#if defined(REFLECTIVITY)\nvec4 surfaceMetallicOrReflectivityColorMap=texture2D(reflectivitySampler,vReflectivityUV+uvOffset);\nvec4 baseReflectivity=surfaceMetallicOrReflectivityColorMap;\n#ifndef METALLICWORKFLOW\n#ifdef REFLECTIVITY_GAMMA\nsurfaceMetallicOrReflectivityColorMap=toLinearSpace(surfaceMetallicOrReflectivityColorMap);\n#endif\nsurfaceMetallicOrReflectivityColorMap.rgb*=vReflectivityInfos.y;\n#endif\n#endif\n#if defined(MICROSURFACEMAP)\nvec4 microSurfaceTexel=texture2D(microSurfaceSampler,vMicroSurfaceSamplerUV+uvOffset)*vMicroSurfaceSamplerInfos.y;\n#endif\n#ifdef METALLICWORKFLOW\nvec4 metallicReflectanceFactors=vMetallicReflectanceFactors;\n#ifdef REFLECTANCE\nvec4 reflectanceFactorsMap=texture2D(reflectanceSampler,vReflectanceUV+uvOffset);\n#ifdef REFLECTANCE_GAMMA\nreflectanceFactorsMap=toLinearSpace(reflectanceFactorsMap);\n#endif\nmetallicReflectanceFactors.rgb*=reflectanceFactorsMap.rgb;\n#endif\n#ifdef METALLIC_REFLECTANCE\nvec4 metallicReflectanceFactorsMap=texture2D(metallicReflectanceSampler,vMetallicReflectanceUV+uvOffset);\n#ifdef METALLIC_REFLECTANCE_GAMMA\nmetallicReflectanceFactorsMap=toLinearSpace(metallicReflectanceFactorsMap);\n#endif\n#ifndef METALLIC_REFLECTANCE_USE_ALPHA_ONLY\nmetallicReflectanceFactors.rgb*=metallicReflectanceFactorsMap.rgb;\n#endif\nmetallicReflectanceFactors*=metallicReflectanceFactorsMap.a;\n#endif\n#endif\nreflectivityBlock(\nvReflectivityColor,\n#ifdef METALLICWORKFLOW\nsurfaceAlbedo,\nmetallicReflectanceFactors,\n#endif\n#ifdef REFLECTIVITY\nvReflectivityInfos,\nsurfaceMetallicOrReflectivityColorMap,\n#endif\n#if defined(METALLICWORKFLOW) && defined(REFLECTIVITY) && defined(AOSTOREINMETALMAPRED)\naoOut.ambientOcclusionColor,\n#endif\n#ifdef MICROSURFACEMAP\nmicroSurfaceTexel,\n#endif\n#ifdef DETAIL\ndetailColor,\nvDetailInfos,\n#endif\nreflectivityOut\n);\nfloat microSurface=reflectivityOut.microSurface;\nfloat roughness=reflectivityOut.roughness;\n#ifdef METALLICWORKFLOW\nsurfaceAlbedo=reflectivityOut.surfaceAlbedo;\n#endif\n#if defined(METALLICWORKFLOW) && defined(REFLECTIVITY) && defined(AOSTOREINMETALMAPRED)\naoOut.ambientOcclusionColor=reflectivityOut.ambientOcclusionColor;\n#endif\n#ifdef ALPHAFRESNEL\n#if defined(ALPHATEST) || defined(ALPHABLEND)\nalphaFresnelOutParams alphaFresnelOut;\nalphaFresnelBlock(\nnormalW,\nviewDirectionW,\nalpha,\nmicroSurface,\nalphaFresnelOut\n);\nalpha=alphaFresnelOut.alpha;\n#endif\n#endif\n#include<pbrBlockGeometryInfo>\n#ifdef ANISOTROPIC\nanisotropicOutParams anisotropicOut;\n#ifdef ANISOTROPIC_TEXTURE\nvec3 anisotropyMapData=texture2D(anisotropySampler,vAnisotropyUV+uvOffset).rgb*vAnisotropyInfos.y;\n#endif\nanisotropicBlock(\nvAnisotropy,\n#ifdef ANISOTROPIC_TEXTURE\nanisotropyMapData,\n#endif\nTBN,\nnormalW,\nviewDirectionW,\nanisotropicOut\n);\n#endif\n#ifdef REFLECTION\nreflectionOutParams reflectionOut;\n#ifndef USE_CUSTOM_REFLECTION\nreflectionBlock(\nvPositionW,\nnormalW,\nalphaG,\nvReflectionMicrosurfaceInfos,\nvReflectionInfos,\nvReflectionColor,\n#ifdef ANISOTROPIC\nanisotropicOut,\n#endif\n#if defined(LODINREFLECTIONALPHA) && !defined(REFLECTIONMAP_SKYBOX)\nNdotVUnclamped,\n#endif\n#ifdef LINEARSPECULARREFLECTION\nroughness,\n#endif\nreflectionSampler,\n#if defined(NORMAL) && defined(USESPHERICALINVERTEX)\nvEnvironmentIrradiance,\n#endif\n#ifdef USESPHERICALFROMREFLECTIONMAP\n#if !defined(NORMAL) || !defined(USESPHERICALINVERTEX)\nreflectionMatrix,\n#endif\n#endif\n#ifdef USEIRRADIANCEMAP\nirradianceSampler,\n#endif\n#ifndef LODBASEDMICROSFURACE\nreflectionSamplerLow,\nreflectionSamplerHigh,\n#endif\n#ifdef REALTIME_FILTERING\nvReflectionFilteringInfo,\n#endif\nreflectionOut\n);\n#else\n#define CUSTOM_REFLECTION\n#endif\n#endif\n#include<pbrBlockReflectance0>\n#ifdef SHEEN\nsheenOutParams sheenOut;\n#ifdef SHEEN_TEXTURE\nvec4 sheenMapData=texture2D(sheenSampler,vSheenUV+uvOffset);\n#endif\n#if defined(SHEEN_ROUGHNESS) && defined(SHEEN_TEXTURE_ROUGHNESS) && !defined(SHEEN_TEXTURE_ROUGHNESS_IDENTICAL) && !defined(SHEEN_USE_ROUGHNESS_FROM_MAINTEXTURE)\nvec4 sheenMapRoughnessData=texture2D(sheenRoughnessSampler,vSheenRoughnessUV+uvOffset)*vSheenInfos.w;\n#endif\nsheenBlock(\nvSheenColor,\n#ifdef SHEEN_ROUGHNESS\nvSheenRoughness,\n#if defined(SHEEN_TEXTURE_ROUGHNESS) && !defined(SHEEN_TEXTURE_ROUGHNESS_IDENTICAL) && !defined(SHEEN_USE_ROUGHNESS_FROM_MAINTEXTURE)\nsheenMapRoughnessData,\n#endif\n#endif\nroughness,\n#ifdef SHEEN_TEXTURE\nsheenMapData,\nvSheenInfos.y,\n#endif\nreflectance,\n#ifdef SHEEN_LINKWITHALBEDO\nbaseColor,\nsurfaceAlbedo,\n#endif\n#ifdef ENVIRONMENTBRDF\nNdotV,\nenvironmentBrdf,\n#endif\n#if defined(REFLECTION) && defined(ENVIRONMENTBRDF)\nAARoughnessFactors,\nvReflectionMicrosurfaceInfos,\nvReflectionInfos,\nvReflectionColor,\nvLightingIntensity,\nreflectionSampler,\nreflectionOut.reflectionCoords,\nNdotVUnclamped,\n#ifndef LODBASEDMICROSFURACE\nreflectionSamplerLow,\nreflectionSamplerHigh,\n#endif\n#ifdef REALTIME_FILTERING\nvReflectionFilteringInfo,\n#endif\n#if !defined(REFLECTIONMAP_SKYBOX) && defined(RADIANCEOCCLUSION)\nseo,\n#endif\n#if !defined(REFLECTIONMAP_SKYBOX) && defined(HORIZONOCCLUSION) && defined(BUMP) && defined(REFLECTIONMAP_3D)\neho,\n#endif\n#endif\nsheenOut\n);\n#ifdef SHEEN_LINKWITHALBEDO\nsurfaceAlbedo=sheenOut.surfaceAlbedo;\n#endif\n#endif\n#ifdef CLEARCOAT\n#ifdef CLEARCOAT_TEXTURE\nvec2 clearCoatMapData=texture2D(clearCoatSampler,vClearCoatUV+uvOffset).rg*vClearCoatInfos.y;\n#endif\n#endif\n#ifdef IRIDESCENCE\niridescenceOutParams iridescenceOut;\n#ifdef IRIDESCENCE_TEXTURE\nvec2 iridescenceMapData=texture2D(iridescenceSampler,vIridescenceUV+uvOffset).rg*vIridescenceInfos.y;\n#endif\n#ifdef IRIDESCENCE_THICKNESS_TEXTURE\nvec2 iridescenceThicknessMapData=texture2D(iridescenceThicknessSampler,vIridescenceThicknessUV+uvOffset).rg*vIridescenceInfos.w;\n#endif\niridescenceBlock(\nvIridescenceParams,\nNdotV,\nspecularEnvironmentR0,\n#ifdef IRIDESCENCE_TEXTURE\niridescenceMapData,\n#endif\n#ifdef IRIDESCENCE_THICKNESS_TEXTURE\niridescenceThicknessMapData,\n#endif\n#ifdef CLEARCOAT\nNdotVUnclamped,\n#ifdef CLEARCOAT_TEXTURE\nclearCoatMapData,\n#endif\n#endif\niridescenceOut\n);\nfloat iridescenceIntensity=iridescenceOut.iridescenceIntensity;\nspecularEnvironmentR0=iridescenceOut.specularEnvironmentR0;\n#endif\nclearcoatOutParams clearcoatOut;\n#ifdef CLEARCOAT\n#if defined(CLEARCOAT_TEXTURE_ROUGHNESS) && !defined(CLEARCOAT_TEXTURE_ROUGHNESS_IDENTICAL) && !defined(CLEARCOAT_USE_ROUGHNESS_FROM_MAINTEXTURE)\nvec4 clearCoatMapRoughnessData=texture2D(clearCoatRoughnessSampler,vClearCoatRoughnessUV+uvOffset)*vClearCoatInfos.w;\n#endif\n#if defined(CLEARCOAT_TINT) && defined(CLEARCOAT_TINT_TEXTURE)\nvec4 clearCoatTintMapData=texture2D(clearCoatTintSampler,vClearCoatTintUV+uvOffset);\n#endif\n#ifdef CLEARCOAT_BUMP\nvec4 clearCoatBumpMapData=texture2D(clearCoatBumpSampler,vClearCoatBumpUV+uvOffset);\n#endif\nclearcoatBlock(\nvPositionW,\ngeometricNormalW,\nviewDirectionW,\nvClearCoatParams,\n#if defined(CLEARCOAT_TEXTURE_ROUGHNESS) && !defined(CLEARCOAT_TEXTURE_ROUGHNESS_IDENTICAL) && !defined(CLEARCOAT_USE_ROUGHNESS_FROM_MAINTEXTURE)\nclearCoatMapRoughnessData,\n#endif\nspecularEnvironmentR0,\n#ifdef CLEARCOAT_TEXTURE\nclearCoatMapData,\n#endif\n#ifdef CLEARCOAT_TINT\nvClearCoatTintParams,\nclearCoatColorAtDistance,\nvClearCoatRefractionParams,\n#ifdef CLEARCOAT_TINT_TEXTURE\nclearCoatTintMapData,\n#endif\n#endif\n#ifdef CLEARCOAT_BUMP\nvClearCoatBumpInfos,\nclearCoatBumpMapData,\nvClearCoatBumpUV,\n#if defined(TANGENT) && defined(NORMAL)\nvTBN,\n#else\nvClearCoatTangentSpaceParams,\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\nnormalMatrix,\n#endif\n#endif\n#if defined(FORCENORMALFORWARD) && defined(NORMAL)\nfaceNormal,\n#endif\n#ifdef REFLECTION\nvReflectionMicrosurfaceInfos,\nvReflectionInfos,\nvReflectionColor,\nvLightingIntensity,\nreflectionSampler,\n#ifndef LODBASEDMICROSFURACE\nreflectionSamplerLow,\nreflectionSamplerHigh,\n#endif\n#ifdef REALTIME_FILTERING\nvReflectionFilteringInfo,\n#endif\n#endif\n#if defined(ENVIRONMENTBRDF) && !defined(REFLECTIONMAP_SKYBOX)\n#ifdef RADIANCEOCCLUSION\nambientMonochrome,\n#endif\n#endif\n#if defined(CLEARCOAT_BUMP) || defined(TWOSIDEDLIGHTING)\n(gl_FrontFacing ? 1. : -1.),\n#endif\nclearcoatOut\n);\n#else\nclearcoatOut.specularEnvironmentR0=specularEnvironmentR0;\n#endif\n#include<pbrBlockReflectance>\nsubSurfaceOutParams subSurfaceOut;\n#ifdef SUBSURFACE\n#ifdef SS_THICKNESSANDMASK_TEXTURE\nvec4 thicknessMap=texture2D(thicknessSampler,vThicknessUV+uvOffset);\n#endif\n#ifdef SS_REFRACTIONINTENSITY_TEXTURE\nvec4 refractionIntensityMap=texture2D(refractionIntensitySampler,vRefractionIntensityUV+uvOffset);\n#endif\n#ifdef SS_TRANSLUCENCYINTENSITY_TEXTURE\nvec4 translucencyIntensityMap=texture2D(translucencyIntensitySampler,vTranslucencyIntensityUV+uvOffset);\n#endif\nsubSurfaceBlock(\nvSubSurfaceIntensity,\nvThicknessParam,\nvTintColor,\nnormalW,\nspecularEnvironmentReflectance,\n#ifdef SS_THICKNESSANDMASK_TEXTURE\nthicknessMap,\n#endif\n#ifdef SS_REFRACTIONINTENSITY_TEXTURE\nrefractionIntensityMap,\n#endif\n#ifdef SS_TRANSLUCENCYINTENSITY_TEXTURE\ntranslucencyIntensityMap,\n#endif\n#ifdef REFLECTION\n#ifdef SS_TRANSLUCENCY\nreflectionMatrix,\n#ifdef USESPHERICALFROMREFLECTIONMAP\n#if !defined(NORMAL) || !defined(USESPHERICALINVERTEX)\nreflectionOut.irradianceVector,\n#endif\n#if defined(REALTIME_FILTERING)\nreflectionSampler,\nvReflectionFilteringInfo,\n#endif\n#endif\n#ifdef USEIRRADIANCEMAP\nirradianceSampler,\n#endif\n#endif\n#endif\n#if defined(SS_REFRACTION) || defined(SS_TRANSLUCENCY)\nsurfaceAlbedo,\n#endif\n#ifdef SS_REFRACTION\nvPositionW,\nviewDirectionW,\nview,\nvRefractionInfos,\nrefractionMatrix,\nvRefractionMicrosurfaceInfos,\nvLightingIntensity,\n#ifdef SS_LINKREFRACTIONTOTRANSPARENCY\nalpha,\n#endif\n#ifdef SS_LODINREFRACTIONALPHA\nNdotVUnclamped,\n#endif\n#ifdef SS_LINEARSPECULARREFRACTION\nroughness,\n#endif\nalphaG,\nrefractionSampler,\n#ifndef LODBASEDMICROSFURACE\nrefractionSamplerLow,\nrefractionSamplerHigh,\n#endif\n#ifdef ANISOTROPIC\nanisotropicOut,\n#endif\n#ifdef REALTIME_FILTERING\nvRefractionFilteringInfo,\n#endif\n#ifdef SS_USE_LOCAL_REFRACTIONMAP_CUBIC\nvRefractionPosition,\nvRefractionSize,\n#endif\n#endif\n#ifdef SS_TRANSLUCENCY\nvDiffusionDistance,\n#endif\nsubSurfaceOut\n);\n#ifdef SS_REFRACTION\nsurfaceAlbedo=subSurfaceOut.surfaceAlbedo;\n#ifdef SS_LINKREFRACTIONTOTRANSPARENCY\nalpha=subSurfaceOut.alpha;\n#endif\n#endif\n#else\nsubSurfaceOut.specularEnvironmentReflectance=specularEnvironmentReflectance;\n#endif\n#include<pbrBlockDirectLighting>\n#include<lightFragment>[0..maxSimultaneousLights]\n#include<pbrBlockFinalLitComponents>\n#endif \n#include<pbrBlockFinalUnlitComponents>\n#define CUSTOM_FRAGMENT_BEFORE_FINALCOLORCOMPOSITION\n#include<pbrBlockFinalColorComposition>\n#include<logDepthFragment>\n#include<fogFragment>(color,finalColor)\n#include<pbrBlockImageProcessing>\n#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR\n#ifdef PREPASS\nfloat writeGeometryInfo=finalColor.a>0.4 ? 1.0 : 0.0;\n#ifdef PREPASS_POSITION\ngl_FragData[PREPASS_POSITION_INDEX]=vec4(vPositionW,writeGeometryInfo);\n#endif\n#ifdef PREPASS_VELOCITY\nvec2 a=(vCurrentPosition.xy/vCurrentPosition.w)*0.5+0.5;\nvec2 b=(vPreviousPosition.xy/vPreviousPosition.w)*0.5+0.5;\nvec2 velocity=abs(a-b);\nvelocity=vec2(pow(velocity.x,1.0/3.0),pow(velocity.y,1.0/3.0))*sign(a-b)*0.5+0.5;\ngl_FragData[PREPASS_VELOCITY_INDEX]=vec4(velocity,0.0,writeGeometryInfo);\n#endif\n#ifdef PREPASS_ALBEDO_SQRT\nvec3 sqAlbedo=sqrt(surfaceAlbedo); \n#endif\n#ifdef PREPASS_IRRADIANCE\nvec3 irradiance=finalDiffuse;\n#ifndef UNLIT\n#ifdef REFLECTION\nirradiance+=finalIrradiance;\n#endif\n#endif\n#ifdef SS_SCATTERING\ngl_FragData[0]=vec4(finalColor.rgb-irradiance,finalColor.a); \nirradiance/=sqAlbedo;\n#else\ngl_FragData[0]=finalColor; \nfloat scatteringDiffusionProfile=255.;\n#endif\ngl_FragData[PREPASS_IRRADIANCE_INDEX]=vec4(clamp(irradiance,vec3(0.),vec3(1.)),writeGeometryInfo*scatteringDiffusionProfile/255.); \n#else\ngl_FragData[0]=vec4(finalColor.rgb,finalColor.a);\n#endif\n#ifdef PREPASS_DEPTH\ngl_FragData[PREPASS_DEPTH_INDEX]=vec4(vViewPos.z,0.0,0.0,writeGeometryInfo); \n#endif\n#ifdef PREPASS_NORMAL\ngl_FragData[PREPASS_NORMAL_INDEX]=vec4(normalize((view*vec4(normalW,0.0)).rgb),writeGeometryInfo); \n#endif\n#ifdef PREPASS_ALBEDO_SQRT\ngl_FragData[PREPASS_ALBEDO_SQRT_INDEX]=vec4(sqAlbedo,writeGeometryInfo); \n#endif\n#ifdef PREPASS_REFLECTIVITY\n#ifndef UNLIT\ngl_FragData[PREPASS_REFLECTIVITY_INDEX]=vec4(specularEnvironmentR0,microSurface)*writeGeometryInfo;\n#else\ngl_FragData[PREPASS_REFLECTIVITY_INDEX]=vec4( 0.0,0.0,0.0,1.0 )*writeGeometryInfo;\n#endif\n#endif\n#endif\n#if !defined(PREPASS) || defined(WEBGL2)\ngl_FragColor=finalColor;\n#endif\n#include<oitFragment>\n#if ORDER_INDEPENDENT_TRANSPARENCY\nif (fragDepth==nearestDepth) {\nfrontColor.rgb+=finalColor.rgb*finalColor.a*alphaMultiplier;\nfrontColor.a=1.0-alphaMultiplier*(1.0-finalColor.a);\n} else {\nbackColor+=finalColor;\n}\n#endif\n#include<pbrDebug>\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n`;\n// Sideeffect\n_shaderStore.ShaderStore.ShadersStore[name] = shader;\n/** @internal */\nconst pbrPixelShader = exports.pbrPixelShader = {\n  name,\n  shader\n};"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":4}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":16}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":19}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":7,"column":26}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":8,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":8,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":9,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":9,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":10,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":10,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":11,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":11,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":12,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":12,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":13,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":13,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":14,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":14,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":15,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":15,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":16,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":16,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":17,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":17,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":18,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":18,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":19,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":19,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":20,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":20,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":21,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":21,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":22,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":22,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":23,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":23,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":24,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":24,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":25,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":25,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":26,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":26,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":27,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":27,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":28,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":28,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":29,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":29,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":30,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":30,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":31,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":31,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":27,"column":0},"generated":{"line":32,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":27,"column":0},"generated":{"line":32,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":33,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":33,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":34,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":34,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":35,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":35,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":36,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":36,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":37,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":37,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":33,"column":0},"generated":{"line":38,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":33,"column":0},"generated":{"line":38,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":39,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":39,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":35,"column":0},"generated":{"line":40,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":35,"column":0},"generated":{"line":40,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":36,"column":0},"generated":{"line":41,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":36,"column":0},"generated":{"line":41,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":37,"column":0},"generated":{"line":42,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":37,"column":0},"generated":{"line":42,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":38,"column":0},"generated":{"line":43,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":38,"column":0},"generated":{"line":43,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":44,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":44,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":45,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":45,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":41,"column":0},"generated":{"line":46,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":41,"column":0},"generated":{"line":46,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":47,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":47,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":43,"column":0},"generated":{"line":48,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":43,"column":0},"generated":{"line":48,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":44,"column":0},"generated":{"line":49,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":44,"column":0},"generated":{"line":49,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":45,"column":0},"generated":{"line":50,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":45,"column":0},"generated":{"line":50,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":46,"column":0},"generated":{"line":51,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":46,"column":0},"generated":{"line":51,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":47,"column":0},"generated":{"line":52,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":47,"column":0},"generated":{"line":52,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":48,"column":0},"generated":{"line":53,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":48,"column":0},"generated":{"line":53,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":49,"column":0},"generated":{"line":54,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":49,"column":0},"generated":{"line":54,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":50,"column":0},"generated":{"line":55,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":50,"column":0},"generated":{"line":55,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":51,"column":0},"generated":{"line":56,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":51,"column":0},"generated":{"line":56,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":52,"column":0},"generated":{"line":57,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":52,"column":0},"generated":{"line":57,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":58,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":58,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":54,"column":0},"generated":{"line":59,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":54,"column":0},"generated":{"line":59,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":55,"column":0},"generated":{"line":60,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":55,"column":0},"generated":{"line":60,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":56,"column":0},"generated":{"line":61,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":56,"column":0},"generated":{"line":61,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":57,"column":0},"generated":{"line":62,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":57,"column":0},"generated":{"line":62,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":58,"column":0},"generated":{"line":63,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":58,"column":0},"generated":{"line":63,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":59,"column":0},"generated":{"line":64,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":59,"column":0},"generated":{"line":64,"column":7}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":65,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":61,"column":0},"generated":{"line":67,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":61,"column":6},"generated":{"line":67,"column":6}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":61,"column":10},"generated":{"line":67,"column":10}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":61,"column":13},"generated":{"line":67,"column":13}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":61,"column":29},"generated":{"line":67,"column":29}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":62,"column":0},"generated":{"line":68,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":62,"column":6},"generated":{"line":68,"column":6}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":68,"column":12}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":62,"column":15},"generated":{"line":68,"column":15}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":649,"column":1},"generated":{"line":655,"column":1}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":650,"column":0},"generated":{"line":656,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":651,"column":0},"generated":{"line":657,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":651,"column":11},"generated":{"line":657,"column":24}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":651,"column":12},"generated":{"line":657,"column":25}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":651,"column":24},"generated":{"line":657,"column":37}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":651,"column":25},"generated":{"line":657,"column":38}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":651,"column":29},"generated":{"line":657,"column":42}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":651,"column":30},"generated":{"line":657,"column":43}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":651,"column":33},"generated":{"line":657,"column":46}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":651,"column":39},"generated":{"line":657,"column":52}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":652,"column":0},"generated":{"line":658,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":7},"generated":{"line":659,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":13},"generated":{"line":659,"column":6}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":27},"generated":{"line":659,"column":20}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":27},"generated":{"line":659,"column":23}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":27},"generated":{"line":659,"column":30}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":27},"generated":{"line":659,"column":31}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":27},"generated":{"line":659,"column":45}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":30},"generated":{"line":659,"column":48}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":32},"generated":{"line":660,"column":2}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":36},"generated":{"line":660,"column":6}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":38},"generated":{"line":661,"column":2}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":44},"generated":{"line":662,"column":0}},{"source":"../../../../lts/core/generated/Shaders/pbr.fragment.ts","name":null,"original":{"line":653,"column":46},"generated":{"line":662,"column":1}}],"sources":{"../../../../lts/core/generated/Shaders/pbr.fragment.ts":"// Do not edit.\nimport { ShaderStore } from \"../Engines/shaderStore\";\nimport \"./ShadersInclude/prePassDeclaration\";\nimport \"./ShadersInclude/oitDeclaration\";\nimport \"./ShadersInclude/pbrFragmentDeclaration\";\nimport \"./ShadersInclude/pbrUboDeclaration\";\nimport \"./ShadersInclude/pbrFragmentExtraDeclaration\";\nimport \"./ShadersInclude/lightFragmentDeclaration\";\nimport \"./ShadersInclude/lightUboDeclaration\";\nimport \"./ShadersInclude/pbrFragmentSamplersDeclaration\";\nimport \"./ShadersInclude/imageProcessingDeclaration\";\nimport \"./ShadersInclude/clipPlaneFragmentDeclaration\";\nimport \"./ShadersInclude/logDepthDeclaration\";\nimport \"./ShadersInclude/fogFragmentDeclaration\";\nimport \"./ShadersInclude/helperFunctions\";\nimport \"./ShadersInclude/subSurfaceScatteringFunctions\";\nimport \"./ShadersInclude/importanceSampling\";\nimport \"./ShadersInclude/pbrHelperFunctions\";\nimport \"./ShadersInclude/imageProcessingFunctions\";\nimport \"./ShadersInclude/shadowsFragmentFunctions\";\nimport \"./ShadersInclude/harmonicsFunctions\";\nimport \"./ShadersInclude/pbrDirectLightingSetupFunctions\";\nimport \"./ShadersInclude/pbrDirectLightingFalloffFunctions\";\nimport \"./ShadersInclude/pbrBRDFFunctions\";\nimport \"./ShadersInclude/hdrFilteringFunctions\";\nimport \"./ShadersInclude/pbrDirectLightingFunctions\";\nimport \"./ShadersInclude/pbrIBLFunctions\";\nimport \"./ShadersInclude/bumpFragmentMainFunctions\";\nimport \"./ShadersInclude/bumpFragmentFunctions\";\nimport \"./ShadersInclude/reflectionFunction\";\nimport \"./ShadersInclude/pbrBlockAlbedoOpacity\";\nimport \"./ShadersInclude/pbrBlockReflectivity\";\nimport \"./ShadersInclude/pbrBlockAmbientOcclusion\";\nimport \"./ShadersInclude/pbrBlockAlphaFresnel\";\nimport \"./ShadersInclude/pbrBlockAnisotropic\";\nimport \"./ShadersInclude/pbrBlockReflection\";\nimport \"./ShadersInclude/pbrBlockSheen\";\nimport \"./ShadersInclude/pbrBlockClearcoat\";\nimport \"./ShadersInclude/pbrBlockIridescence\";\nimport \"./ShadersInclude/pbrBlockSubSurface\";\nimport \"./ShadersInclude/clipPlaneFragment\";\nimport \"./ShadersInclude/pbrBlockNormalGeometric\";\nimport \"./ShadersInclude/bumpFragment\";\nimport \"./ShadersInclude/pbrBlockNormalFinal\";\nimport \"./ShadersInclude/depthPrePass\";\nimport \"./ShadersInclude/pbrBlockLightmapInit\";\nimport \"./ShadersInclude/pbrBlockGeometryInfo\";\nimport \"./ShadersInclude/pbrBlockReflectance0\";\nimport \"./ShadersInclude/pbrBlockReflectance\";\nimport \"./ShadersInclude/pbrBlockDirectLighting\";\nimport \"./ShadersInclude/lightFragment\";\nimport \"./ShadersInclude/pbrBlockFinalLitComponents\";\nimport \"./ShadersInclude/pbrBlockFinalUnlitComponents\";\nimport \"./ShadersInclude/pbrBlockFinalColorComposition\";\nimport \"./ShadersInclude/logDepthFragment\";\nimport \"./ShadersInclude/fogFragment\";\nimport \"./ShadersInclude/pbrBlockImageProcessing\";\nimport \"./ShadersInclude/oitFragment\";\nimport \"./ShadersInclude/pbrDebug\";\n\nconst name = \"pbrPixelShader\";\nconst shader = `#if defined(BUMP) || !defined(NORMAL) || defined(FORCENORMALFORWARD) || defined(SPECULARAA) || defined(CLEARCOAT_BUMP) || defined(ANISOTROPIC)\n#extension GL_OES_standard_derivatives : enable\n#endif\n#ifdef LODBASEDMICROSFURACE\n#extension GL_EXT_shader_texture_lod : enable\n#endif\n#define CUSTOM_FRAGMENT_BEGIN\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\n#include<prePassDeclaration>[SCENE_MRT_COUNT]\nprecision highp float;\r#include<oitDeclaration>\n#ifndef FROMLINEARSPACE\n#define FROMLINEARSPACE\n#endif\n#include<__decl__pbrFragment>\n#include<pbrFragmentExtraDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<pbrFragmentSamplersDeclaration>\n#include<imageProcessingDeclaration>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n#include<fogFragmentDeclaration>\n#include<helperFunctions>\n#include<subSurfaceScatteringFunctions>\n#include<importanceSampling>\n#include<pbrHelperFunctions>\n#include<imageProcessingFunctions>\n#include<shadowsFragmentFunctions>\n#include<harmonicsFunctions>\n#include<pbrDirectLightingSetupFunctions>\n#include<pbrDirectLightingFalloffFunctions>\n#include<pbrBRDFFunctions>\n#include<hdrFilteringFunctions>\n#include<pbrDirectLightingFunctions>\n#include<pbrIBLFunctions>\n#include<bumpFragmentMainFunctions>\n#include<bumpFragmentFunctions>\n#ifdef REFLECTION\n#include<reflectionFunction>\n#endif\n#define CUSTOM_FRAGMENT_DEFINITIONS\n#include<pbrBlockAlbedoOpacity>\n#include<pbrBlockReflectivity>\n#include<pbrBlockAmbientOcclusion>\n#include<pbrBlockAlphaFresnel>\n#include<pbrBlockAnisotropic>\n#include<pbrBlockReflection>\n#include<pbrBlockSheen>\n#include<pbrBlockClearcoat>\n#include<pbrBlockIridescence>\n#include<pbrBlockSubSurface>\nvoid main(void) {\r#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include<clipPlaneFragment>\n#include<pbrBlockNormalGeometric>\n#include<bumpFragment>\n#include<pbrBlockNormalFinal>\nalbedoOpacityOutParams albedoOpacityOut;\r#ifdef ALBEDO\nvec4 albedoTexture=texture2D(albedoSampler,vAlbedoUV+uvOffset);\r#endif\n#ifdef OPACITY\nvec4 opacityMap=texture2D(opacitySampler,vOpacityUV+uvOffset);\r#endif\n#ifdef DECAL\nvec4 decalColor=texture2D(decalSampler,vDecalUV+uvOffset);\r#endif\nalbedoOpacityBlock(\rvAlbedoColor,\r#ifdef ALBEDO\nalbedoTexture,\rvAlbedoInfos,\r#endif\n#ifdef OPACITY\nopacityMap,\rvOpacityInfos,\r#endif\n#ifdef DETAIL\ndetailColor,\rvDetailInfos,\r#endif\n#ifdef DECAL\ndecalColor,\rvDecalInfos,\r#endif\nalbedoOpacityOut\r);\rvec3 surfaceAlbedo=albedoOpacityOut.surfaceAlbedo;\rfloat alpha=albedoOpacityOut.alpha;\r#define CUSTOM_FRAGMENT_UPDATE_ALPHA\n#include<depthPrePass>\n#define CUSTOM_FRAGMENT_BEFORE_LIGHTS\nambientOcclusionOutParams aoOut;\r#ifdef AMBIENT\nvec3 ambientOcclusionColorMap=texture2D(ambientSampler,vAmbientUV+uvOffset).rgb;\r#endif\nambientOcclusionBlock(\r#ifdef AMBIENT\nambientOcclusionColorMap,\rvAmbientInfos,\r#endif\naoOut\r);\r#include<pbrBlockLightmapInit>\n#ifdef UNLIT\nvec3 diffuseBase=vec3(1.,1.,1.);\r#else\nvec3 baseColor=surfaceAlbedo;\rreflectivityOutParams reflectivityOut;\r#if defined(REFLECTIVITY)\nvec4 surfaceMetallicOrReflectivityColorMap=texture2D(reflectivitySampler,vReflectivityUV+uvOffset);\rvec4 baseReflectivity=surfaceMetallicOrReflectivityColorMap;\r#ifndef METALLICWORKFLOW\n#ifdef REFLECTIVITY_GAMMA\nsurfaceMetallicOrReflectivityColorMap=toLinearSpace(surfaceMetallicOrReflectivityColorMap);\r#endif\nsurfaceMetallicOrReflectivityColorMap.rgb*=vReflectivityInfos.y;\r#endif\n#endif\n#if defined(MICROSURFACEMAP)\nvec4 microSurfaceTexel=texture2D(microSurfaceSampler,vMicroSurfaceSamplerUV+uvOffset)*vMicroSurfaceSamplerInfos.y;\r#endif\n#ifdef METALLICWORKFLOW\nvec4 metallicReflectanceFactors=vMetallicReflectanceFactors;\r#ifdef REFLECTANCE\nvec4 reflectanceFactorsMap=texture2D(reflectanceSampler,vReflectanceUV+uvOffset);\r#ifdef REFLECTANCE_GAMMA\nreflectanceFactorsMap=toLinearSpace(reflectanceFactorsMap);\r#endif\nmetallicReflectanceFactors.rgb*=reflectanceFactorsMap.rgb;\r#endif\n#ifdef METALLIC_REFLECTANCE\nvec4 metallicReflectanceFactorsMap=texture2D(metallicReflectanceSampler,vMetallicReflectanceUV+uvOffset);\r#ifdef METALLIC_REFLECTANCE_GAMMA\nmetallicReflectanceFactorsMap=toLinearSpace(metallicReflectanceFactorsMap);\r#endif\n#ifndef METALLIC_REFLECTANCE_USE_ALPHA_ONLY\nmetallicReflectanceFactors.rgb*=metallicReflectanceFactorsMap.rgb;\r#endif\nmetallicReflectanceFactors*=metallicReflectanceFactorsMap.a;\r#endif\n#endif\nreflectivityBlock(\rvReflectivityColor,\r#ifdef METALLICWORKFLOW\nsurfaceAlbedo,\rmetallicReflectanceFactors,\r#endif\n#ifdef REFLECTIVITY\nvReflectivityInfos,\rsurfaceMetallicOrReflectivityColorMap,\r#endif\n#if defined(METALLICWORKFLOW) && defined(REFLECTIVITY) && defined(AOSTOREINMETALMAPRED)\naoOut.ambientOcclusionColor,\r#endif\n#ifdef MICROSURFACEMAP\nmicroSurfaceTexel,\r#endif\n#ifdef DETAIL\ndetailColor,\rvDetailInfos,\r#endif\nreflectivityOut\r);\rfloat microSurface=reflectivityOut.microSurface;\rfloat roughness=reflectivityOut.roughness;\r#ifdef METALLICWORKFLOW\nsurfaceAlbedo=reflectivityOut.surfaceAlbedo;\r#endif\n#if defined(METALLICWORKFLOW) && defined(REFLECTIVITY) && defined(AOSTOREINMETALMAPRED)\naoOut.ambientOcclusionColor=reflectivityOut.ambientOcclusionColor;\r#endif\n#ifdef ALPHAFRESNEL\n#if defined(ALPHATEST) || defined(ALPHABLEND)\nalphaFresnelOutParams alphaFresnelOut;\ralphaFresnelBlock(\rnormalW,\rviewDirectionW,\ralpha,\rmicroSurface,\ralphaFresnelOut\r);\ralpha=alphaFresnelOut.alpha;\r#endif\n#endif\n#include<pbrBlockGeometryInfo>\n#ifdef ANISOTROPIC\nanisotropicOutParams anisotropicOut;\r#ifdef ANISOTROPIC_TEXTURE\nvec3 anisotropyMapData=texture2D(anisotropySampler,vAnisotropyUV+uvOffset).rgb*vAnisotropyInfos.y;\r#endif\nanisotropicBlock(\rvAnisotropy,\r#ifdef ANISOTROPIC_TEXTURE\nanisotropyMapData,\r#endif\nTBN,\rnormalW,\rviewDirectionW,\ranisotropicOut\r);\r#endif\n#ifdef REFLECTION\nreflectionOutParams reflectionOut;\r#ifndef USE_CUSTOM_REFLECTION\nreflectionBlock(\rvPositionW,\rnormalW,\ralphaG,\rvReflectionMicrosurfaceInfos,\rvReflectionInfos,\rvReflectionColor,\r#ifdef ANISOTROPIC\nanisotropicOut,\r#endif\n#if defined(LODINREFLECTIONALPHA) && !defined(REFLECTIONMAP_SKYBOX)\nNdotVUnclamped,\r#endif\n#ifdef LINEARSPECULARREFLECTION\nroughness,\r#endif\nreflectionSampler,\r#if defined(NORMAL) && defined(USESPHERICALINVERTEX)\nvEnvironmentIrradiance,\r#endif\n#ifdef USESPHERICALFROMREFLECTIONMAP\n#if !defined(NORMAL) || !defined(USESPHERICALINVERTEX)\nreflectionMatrix,\r#endif\n#endif\n#ifdef USEIRRADIANCEMAP\nirradianceSampler,\r#endif\n#ifndef LODBASEDMICROSFURACE\nreflectionSamplerLow,\rreflectionSamplerHigh,\r#endif\n#ifdef REALTIME_FILTERING\nvReflectionFilteringInfo,\r#endif\nreflectionOut\r);\r#else\n#define CUSTOM_REFLECTION\n#endif\n#endif\n#include<pbrBlockReflectance0>\n#ifdef SHEEN\nsheenOutParams sheenOut;\r#ifdef SHEEN_TEXTURE\nvec4 sheenMapData=texture2D(sheenSampler,vSheenUV+uvOffset);\r#endif\n#if defined(SHEEN_ROUGHNESS) && defined(SHEEN_TEXTURE_ROUGHNESS) && !defined(SHEEN_TEXTURE_ROUGHNESS_IDENTICAL) && !defined(SHEEN_USE_ROUGHNESS_FROM_MAINTEXTURE)\nvec4 sheenMapRoughnessData=texture2D(sheenRoughnessSampler,vSheenRoughnessUV+uvOffset)*vSheenInfos.w;\r#endif\nsheenBlock(\rvSheenColor,\r#ifdef SHEEN_ROUGHNESS\nvSheenRoughness,\r#if defined(SHEEN_TEXTURE_ROUGHNESS) && !defined(SHEEN_TEXTURE_ROUGHNESS_IDENTICAL) && !defined(SHEEN_USE_ROUGHNESS_FROM_MAINTEXTURE)\nsheenMapRoughnessData,\r#endif\n#endif\nroughness,\r#ifdef SHEEN_TEXTURE\nsheenMapData,\rvSheenInfos.y,\r#endif\nreflectance,\r#ifdef SHEEN_LINKWITHALBEDO\nbaseColor,\rsurfaceAlbedo,\r#endif\n#ifdef ENVIRONMENTBRDF\nNdotV,\renvironmentBrdf,\r#endif\n#if defined(REFLECTION) && defined(ENVIRONMENTBRDF)\nAARoughnessFactors,\rvReflectionMicrosurfaceInfos,\rvReflectionInfos,\rvReflectionColor,\rvLightingIntensity,\rreflectionSampler,\rreflectionOut.reflectionCoords,\rNdotVUnclamped,\r#ifndef LODBASEDMICROSFURACE\nreflectionSamplerLow,\rreflectionSamplerHigh,\r#endif\n#ifdef REALTIME_FILTERING\nvReflectionFilteringInfo,\r#endif\n#if !defined(REFLECTIONMAP_SKYBOX) && defined(RADIANCEOCCLUSION)\nseo,\r#endif\n#if !defined(REFLECTIONMAP_SKYBOX) && defined(HORIZONOCCLUSION) && defined(BUMP) && defined(REFLECTIONMAP_3D)\neho,\r#endif\n#endif\nsheenOut\r);\r#ifdef SHEEN_LINKWITHALBEDO\nsurfaceAlbedo=sheenOut.surfaceAlbedo;\r#endif\n#endif\n#ifdef CLEARCOAT\n#ifdef CLEARCOAT_TEXTURE\nvec2 clearCoatMapData=texture2D(clearCoatSampler,vClearCoatUV+uvOffset).rg*vClearCoatInfos.y;\r#endif\n#endif\n#ifdef IRIDESCENCE\niridescenceOutParams iridescenceOut;\r#ifdef IRIDESCENCE_TEXTURE\nvec2 iridescenceMapData=texture2D(iridescenceSampler,vIridescenceUV+uvOffset).rg*vIridescenceInfos.y;\r#endif\n#ifdef IRIDESCENCE_THICKNESS_TEXTURE\nvec2 iridescenceThicknessMapData=texture2D(iridescenceThicknessSampler,vIridescenceThicknessUV+uvOffset).rg*vIridescenceInfos.w;\r#endif\niridescenceBlock(\rvIridescenceParams,\rNdotV,\rspecularEnvironmentR0,\r#ifdef IRIDESCENCE_TEXTURE\niridescenceMapData,\r#endif\n#ifdef IRIDESCENCE_THICKNESS_TEXTURE\niridescenceThicknessMapData,\r#endif\n#ifdef CLEARCOAT\nNdotVUnclamped,\r#ifdef CLEARCOAT_TEXTURE\nclearCoatMapData,\r#endif\n#endif\niridescenceOut\r);\rfloat iridescenceIntensity=iridescenceOut.iridescenceIntensity;\rspecularEnvironmentR0=iridescenceOut.specularEnvironmentR0;\r#endif\nclearcoatOutParams clearcoatOut;\r#ifdef CLEARCOAT\n#if defined(CLEARCOAT_TEXTURE_ROUGHNESS) && !defined(CLEARCOAT_TEXTURE_ROUGHNESS_IDENTICAL) && !defined(CLEARCOAT_USE_ROUGHNESS_FROM_MAINTEXTURE)\nvec4 clearCoatMapRoughnessData=texture2D(clearCoatRoughnessSampler,vClearCoatRoughnessUV+uvOffset)*vClearCoatInfos.w;\r#endif\n#if defined(CLEARCOAT_TINT) && defined(CLEARCOAT_TINT_TEXTURE)\nvec4 clearCoatTintMapData=texture2D(clearCoatTintSampler,vClearCoatTintUV+uvOffset);\r#endif\n#ifdef CLEARCOAT_BUMP\nvec4 clearCoatBumpMapData=texture2D(clearCoatBumpSampler,vClearCoatBumpUV+uvOffset);\r#endif\nclearcoatBlock(\rvPositionW,\rgeometricNormalW,\rviewDirectionW,\rvClearCoatParams,\r#if defined(CLEARCOAT_TEXTURE_ROUGHNESS) && !defined(CLEARCOAT_TEXTURE_ROUGHNESS_IDENTICAL) && !defined(CLEARCOAT_USE_ROUGHNESS_FROM_MAINTEXTURE)\nclearCoatMapRoughnessData,\r#endif\nspecularEnvironmentR0,\r#ifdef CLEARCOAT_TEXTURE\nclearCoatMapData,\r#endif\n#ifdef CLEARCOAT_TINT\nvClearCoatTintParams,\rclearCoatColorAtDistance,\rvClearCoatRefractionParams,\r#ifdef CLEARCOAT_TINT_TEXTURE\nclearCoatTintMapData,\r#endif\n#endif\n#ifdef CLEARCOAT_BUMP\nvClearCoatBumpInfos,\rclearCoatBumpMapData,\rvClearCoatBumpUV,\r#if defined(TANGENT) && defined(NORMAL)\nvTBN,\r#else\nvClearCoatTangentSpaceParams,\r#endif\n#ifdef OBJECTSPACE_NORMALMAP\nnormalMatrix,\r#endif\n#endif\n#if defined(FORCENORMALFORWARD) && defined(NORMAL)\nfaceNormal,\r#endif\n#ifdef REFLECTION\nvReflectionMicrosurfaceInfos,\rvReflectionInfos,\rvReflectionColor,\rvLightingIntensity,\rreflectionSampler,\r#ifndef LODBASEDMICROSFURACE\nreflectionSamplerLow,\rreflectionSamplerHigh,\r#endif\n#ifdef REALTIME_FILTERING\nvReflectionFilteringInfo,\r#endif\n#endif\n#if defined(ENVIRONMENTBRDF) && !defined(REFLECTIONMAP_SKYBOX)\n#ifdef RADIANCEOCCLUSION\nambientMonochrome,\r#endif\n#endif\n#if defined(CLEARCOAT_BUMP) || defined(TWOSIDEDLIGHTING)\n(gl_FrontFacing ? 1. : -1.),\r#endif\nclearcoatOut\r);\r#else\nclearcoatOut.specularEnvironmentR0=specularEnvironmentR0;\r#endif\n#include<pbrBlockReflectance>\nsubSurfaceOutParams subSurfaceOut;\r#ifdef SUBSURFACE\n#ifdef SS_THICKNESSANDMASK_TEXTURE\nvec4 thicknessMap=texture2D(thicknessSampler,vThicknessUV+uvOffset);\r#endif\n#ifdef SS_REFRACTIONINTENSITY_TEXTURE\nvec4 refractionIntensityMap=texture2D(refractionIntensitySampler,vRefractionIntensityUV+uvOffset);\r#endif\n#ifdef SS_TRANSLUCENCYINTENSITY_TEXTURE\nvec4 translucencyIntensityMap=texture2D(translucencyIntensitySampler,vTranslucencyIntensityUV+uvOffset);\r#endif\nsubSurfaceBlock(\rvSubSurfaceIntensity,\rvThicknessParam,\rvTintColor,\rnormalW,\rspecularEnvironmentReflectance,\r#ifdef SS_THICKNESSANDMASK_TEXTURE\nthicknessMap,\r#endif\n#ifdef SS_REFRACTIONINTENSITY_TEXTURE\nrefractionIntensityMap,\r#endif\n#ifdef SS_TRANSLUCENCYINTENSITY_TEXTURE\ntranslucencyIntensityMap,\r#endif\n#ifdef REFLECTION\n#ifdef SS_TRANSLUCENCY\nreflectionMatrix,\r#ifdef USESPHERICALFROMREFLECTIONMAP\n#if !defined(NORMAL) || !defined(USESPHERICALINVERTEX)\nreflectionOut.irradianceVector,\r#endif\n#if defined(REALTIME_FILTERING)\nreflectionSampler,\rvReflectionFilteringInfo,\r#endif\n#endif\n#ifdef USEIRRADIANCEMAP\nirradianceSampler,\r#endif\n#endif\n#endif\n#if defined(SS_REFRACTION) || defined(SS_TRANSLUCENCY)\nsurfaceAlbedo,\r#endif\n#ifdef SS_REFRACTION\nvPositionW,\rviewDirectionW,\rview,\rvRefractionInfos,\rrefractionMatrix,\rvRefractionMicrosurfaceInfos,\rvLightingIntensity,\r#ifdef SS_LINKREFRACTIONTOTRANSPARENCY\nalpha,\r#endif\n#ifdef SS_LODINREFRACTIONALPHA\nNdotVUnclamped,\r#endif\n#ifdef SS_LINEARSPECULARREFRACTION\nroughness,\r#endif\nalphaG,\rrefractionSampler,\r#ifndef LODBASEDMICROSFURACE\nrefractionSamplerLow,\rrefractionSamplerHigh,\r#endif\n#ifdef ANISOTROPIC\nanisotropicOut,\r#endif\n#ifdef REALTIME_FILTERING\nvRefractionFilteringInfo,\r#endif\n#ifdef SS_USE_LOCAL_REFRACTIONMAP_CUBIC\nvRefractionPosition,\rvRefractionSize,\r#endif\n#endif\n#ifdef SS_TRANSLUCENCY\nvDiffusionDistance,\r#endif\nsubSurfaceOut\r);\r#ifdef SS_REFRACTION\nsurfaceAlbedo=subSurfaceOut.surfaceAlbedo;\r#ifdef SS_LINKREFRACTIONTOTRANSPARENCY\nalpha=subSurfaceOut.alpha;\r#endif\n#endif\n#else\nsubSurfaceOut.specularEnvironmentReflectance=specularEnvironmentReflectance;\r#endif\n#include<pbrBlockDirectLighting>\n#include<lightFragment>[0..maxSimultaneousLights]\n#include<pbrBlockFinalLitComponents>\n#endif \n#include<pbrBlockFinalUnlitComponents>\n#define CUSTOM_FRAGMENT_BEFORE_FINALCOLORCOMPOSITION\n#include<pbrBlockFinalColorComposition>\n#include<logDepthFragment>\n#include<fogFragment>(color,finalColor)\n#include<pbrBlockImageProcessing>\n#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR\n#ifdef PREPASS\nfloat writeGeometryInfo=finalColor.a>0.4 ? 1.0 : 0.0;\r#ifdef PREPASS_POSITION\ngl_FragData[PREPASS_POSITION_INDEX]=vec4(vPositionW,writeGeometryInfo);\r#endif\n#ifdef PREPASS_VELOCITY\nvec2 a=(vCurrentPosition.xy/vCurrentPosition.w)*0.5+0.5;\rvec2 b=(vPreviousPosition.xy/vPreviousPosition.w)*0.5+0.5;\rvec2 velocity=abs(a-b);\rvelocity=vec2(pow(velocity.x,1.0/3.0),pow(velocity.y,1.0/3.0))*sign(a-b)*0.5+0.5;\rgl_FragData[PREPASS_VELOCITY_INDEX]=vec4(velocity,0.0,writeGeometryInfo);\r#endif\n#ifdef PREPASS_ALBEDO_SQRT\nvec3 sqAlbedo=sqrt(surfaceAlbedo); \r#endif\n#ifdef PREPASS_IRRADIANCE\nvec3 irradiance=finalDiffuse;\r#ifndef UNLIT\n#ifdef REFLECTION\nirradiance+=finalIrradiance;\r#endif\n#endif\n#ifdef SS_SCATTERING\ngl_FragData[0]=vec4(finalColor.rgb-irradiance,finalColor.a); \rirradiance/=sqAlbedo;\r#else\ngl_FragData[0]=finalColor; \rfloat scatteringDiffusionProfile=255.;\r#endif\ngl_FragData[PREPASS_IRRADIANCE_INDEX]=vec4(clamp(irradiance,vec3(0.),vec3(1.)),writeGeometryInfo*scatteringDiffusionProfile/255.); \r#else\ngl_FragData[0]=vec4(finalColor.rgb,finalColor.a);\r#endif\n#ifdef PREPASS_DEPTH\ngl_FragData[PREPASS_DEPTH_INDEX]=vec4(vViewPos.z,0.0,0.0,writeGeometryInfo); \r#endif\n#ifdef PREPASS_NORMAL\ngl_FragData[PREPASS_NORMAL_INDEX]=vec4(normalize((view*vec4(normalW,0.0)).rgb),writeGeometryInfo); \r#endif\n#ifdef PREPASS_ALBEDO_SQRT\ngl_FragData[PREPASS_ALBEDO_SQRT_INDEX]=vec4(sqAlbedo,writeGeometryInfo); \r#endif\n#ifdef PREPASS_REFLECTIVITY\n#ifndef UNLIT\ngl_FragData[PREPASS_REFLECTIVITY_INDEX]=vec4(specularEnvironmentR0,microSurface)*writeGeometryInfo;\r#else\ngl_FragData[PREPASS_REFLECTIVITY_INDEX]=vec4( 0.0,0.0,0.0,1.0 )*writeGeometryInfo;\r#endif\n#endif\n#endif\n#if !defined(PREPASS) || defined(WEBGL2)\ngl_FragColor=finalColor;\r#endif\n#include<oitFragment>\n#if ORDER_INDEPENDENT_TRANSPARENCY\nif (fragDepth==nearestDepth) {\rfrontColor.rgb+=finalColor.rgb*finalColor.a*alphaMultiplier;\rfrontColor.a=1.0-alphaMultiplier*(1.0-finalColor.a);\r} else {\rbackColor+=finalColor;\r}\r#endif\n#include<pbrDebug>\n#define CUSTOM_FRAGMENT_MAIN_END\n}\r`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const pbrPixelShader = { name, shader };\n"},"lineCount":null}},"error":null,"hash":"f137fb4c99f9a40aae906767ee0b7604","cacheData":{"env":{}}}